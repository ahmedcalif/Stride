<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card border-0 shadow rounded-3 bg-dark">
                <div class="card-body p-4 p-sm-5">
                    <h2 class="text-center mb-4 fw-bold text-white">Sign In</h2>
                    
                    <form id="loginForm" method="post" action="/Identity/Account/Login">
                        <div class="text-danger mb-3" role="alert" id="validation-summary"></div>
                        
                        <div class="mb-3">
                            <label class="form-label">Username or Email</label>
                            <input type="text" name="Input.Username" class="form-control py-2" autocomplete="username" required placeholder="username or email" />
                            <span class="text-danger" id="username-validation"></span>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" name="Input.Password" class="form-control py-2" autocomplete="current-password" required placeholder="password" />
                            <span class="text-danger" id="password-validation"></span>
                        </div>
                        
                        <div class="form-check mb-3 text-white">
                            <input class="form-check-input" type="checkbox" name="Input.RememberMe" id="rememberMe" />
                            <label class="form-check-label" for="rememberMe">Remember me</label>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg rounded-3 py-2">Sign in</button>
                        </div>
                        
                        <div class="text-center mt-3">
                            <p>
                                <a href="/Identity/Account/ForgotPassword" class="spa-link">Forgot your password?</a>
                            </p>
                            <p>
                                <a href="/Identity/Account/Register" class="spa-link">Don't have an account? Sign up</a>
                            </p>
                            <p>
                                <a href="/Identity/Account/ResendEmailConfirmation" class="spa-link">Resend email confirmation</a>
                            </p>
                        </div>
                    </form>
                        <div class="mt-4"></div>
    <div class="d-flex align-items-center mb-3">
        <hr class="flex-grow-1 border-secondary-subtle">
        <span class="px-2 text-secondary small">OR CONTINUE WITH</span>
        <hr class="flex-grow-1 border-secondary-subtle">
    </div>
    <div class="d-grid">
        <a href="./ExternalLogin" class="btn btn-outline-secondary py-2">
            <i class="bi bi-google me-2"></i>
            Sign in with Google
        </a>
    </div>
</div>
                    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
$(document).ready(function() {
  $('#loginForm').submit(function(e) {
    e.preventDefault();
    
    $.ajax({
      url: $(this).attr('action'),
      type: 'POST',
      data: $(this).serialize(),
      success: function(response) {
        if (response.indexOf('Dashboard') > -1 || response.indexOf('redirectUrl') > -1) {
          window.location.href = '/Dashboard';
        } else {
          $('#content-container').html(response);
        }
      },
      error: function(xhr, status, error) {
        $('#validation-summary').html('<ul><li>An error occurred during login. Please try again.</li></ul>');
        console.error('Login error:', error);
      }
    });
  });
});
</script>